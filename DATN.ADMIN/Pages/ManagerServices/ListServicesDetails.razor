@page "/ListServicesDetails"
@using System.Net.Http.Json
@using DATN.ADMIN.Components
@using DATN.ADMIN.IServices
@using DATN.Data.Entities
@using DATN.ViewModels.Common
@using DATN.ViewModels.DTOs.Authenticate
@inject HttpClient httpClient
@inject ISnackbar Snackbar
@inject IDialogService _dialogservice
<PageTitle>Danh sách dịch vụ chi tiết</PageTitle>
<MudButton Variant="Variant.Filled" Href="/ListServices" Style="margin-block-end" StartIcon="@Icons.Material.Filled.RemoveRedEye" Color="Color.Primary">Danh sách dịch vụ</MudButton>
<MudTable Items="@lstServiesDetails">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Danh sách dịch vụ chi tiết</MudText>
        <MudSpacer />
        <MudTextField T="string" Placeholder="Tìm kiếm, tên" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Small" Class="mt-0"></MudTextField>
    </ToolBarContent>
    <HeaderContent>
        <MudTh Style="text-align:center;">STT</MudTh>
        <MudTh Style="text-align:center;">Tên dịch vụ</MudTh>
        <MudTh Style="text-align:center;">Tên chi tiết</MudTh>
        <MudTh Style="text-align:center;">Giá</MudTh>
        <MudTh Style="text-align:center;">Thời gian làm</MudTh>
        <MudTh Style="text-align:center;">Mô tả</MudTh>
        <MudTh Style="text-align:center;">Ngày tạo</MudTh>
        <MudTh Style="text-align:center;">Trạng thái</MudTh>
        <MudTh Style="text-align:center;">Hành động</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="STT" Style="text-align:center;">
            @(lstServiesDetails.IndexOf(context) + 1)
        </MudTd>
        <MudTd DataLabel="Name" Style="text-align:center;">@context.ServiceId</MudTd>
        <MudTd DataLabel="Name" Style="text-align:center;">@context.Name</MudTd>
        <MudTd DataLabel="Name" Style="text-align:center;">@context.Price</MudTd>
        <MudTd DataLabel="Name" Style="text-align:center;">@context.Duration Phút</MudTd>
        <MudTd DataLabel="Name" Style="text-align:center;">@context.Description</MudTd>
        <MudTd DataLabel="Name" Style="text-align:center;">@context.CreateAt</MudTd>
        @if (!context.IsDeleted)
        {
            <MudTd DataLabel="Email" Style="text-align:center;">
                <MudChip Icon="@Icons.Material.Filled.VerifiedUser" Color="Color.Success" title="Hoạt động">Hiển thị</MudChip>
            </MudTd>
        }
        else
        {
            <MudTd DataLabel="Email" Style="text-align:center;">
                <MudChip Icon="@Icons.Material.Filled.VerifiedUser" Color="Color.Error" title="Hoạt động">Không hiển thị</MudChip>
            </MudTd>
        }
        <MudTd Style="text-align:center;">
            @if (context.IsDeleted)
            {
                <MudButton IconSize="Size.Large" IconColor="Color.Success" StartIcon="@Icons.Material.Filled.Done" Color="Color.Surface" title="Kích hoạt"></MudButton>
            }
            else
            {
                <MudButton IconSize="Size.Large" StartIcon="@Icons.Material.Filled.Delete" IconColor="Color.Error" title="Xoá"></MudButton>
            }

            <MudButton IconSize="Size.Large" StartIcon="@Icons.Material.Filled.Edit" IconColor="Color.Warning" title="Sửa"></MudButton>
            <MudButton IconSize="Size.Large" StartIcon="@Icons.Material.Filled.RemoveRedEye" OnClick="@(() => OpenDrawer(Anchor.End))" IconColor="Color.Info" title="Xem chi tiết"></MudButton>
        </MudTd>

    </RowTemplate>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>
<MudDrawer @bind-Open="@open" Anchor="@anchor" Elevation="2" Variant="@DrawerVariant.Temporary" Width="800px">
    <div style="margin-block-end">
        <MudText Typo="Typo.h6">CHI TIẾT DỊCH VỤ</MudText>
        <MudToggleIconButton @bind-Toggled="@open" ToggledIcon="@Icons.Material.Filled.Close"></MudToggleIconButton>
    </div>
  <div style="margin:10px">
        <MudForm Style="p-4">
            <MudTextField T="string" Label="Tên dịch vụ" Required="true" RequiredError="Tên dịch vụ không được để trống" />
            <MudTextField T="string" Label="Tên chi tiết" Required="true" RequiredError="Tên chi tiết không được để trống" />
            <MudTextField T="string" Label="Giá" Required="true" RequiredError="Giá không được để trống" />
            <MudTextField T="string" Label="Thời gian làm" Required="true" RequiredError="Thời gian làm không được để trống" />
            <MudTextField T="string" Label="Mô tả" Required="true" RequiredError="Mô tả không được để trống" />
            <MudTextField T="string" Label="Trạng thái" Required="true" RequiredError="Trạng thái" />
            @*             <div class="d-flex">
            <MudRadioGroup T="string" Required="true" RequiredError="Account type is required!">
            <MudRadio Option="@("Personal")">Personal</MudRadio>
            <MudRadio Option="@("Professional")">Professional</MudRadio>
            </MudRadioGroup>
            </div> *@
            <div class="d-flex align-center justify-space-between" style="margin-top:10px">
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Cập nhật</MudButton>
            </div>
        </MudForm>
  </div>
</MudDrawer>
<style>
    .my-custom-class {
        backdrop-filter: blur(10px);
    }
</style>
@code {
    private List<ServiceDetail> lstServiesDetails = new List<ServiceDetail>()
    {
(new ServiceDetail{Id=1,ServiceId=1,Name="Nhuộm lông chó",Price=100000f,Duration=30d,Description="Dành cho thú cưng chó",CreateAt=DateTime.Now,IsDeleted=false}),
(new ServiceDetail{Id=2,ServiceId=2,Name="Cắt tỉa lông chó",Price=100000f,Duration=30d,Description="Dành cho thú cưng chó",CreateAt=DateTime.Now,IsDeleted=true}),
(new ServiceDetail{Id=3,ServiceId=3,Name="Nhuộm lông mèo",Price=100000f,Duration=30d,Description="Dành cho thú cưng mèo",CreateAt=DateTime.Now,IsDeleted=false}),
(new ServiceDetail{Id=4,ServiceId=4,Name="Cắt tỉa lông mèo",Price=100000f,Duration=30d,Description="Dành cho thú cưng mèo",CreateAt=DateTime.Now,IsDeleted=true}),
    };

    bool open;
    Anchor anchor;

    void OpenDrawer(Anchor anchor)
    {
        open = true;
        this.anchor = anchor;

    }

}